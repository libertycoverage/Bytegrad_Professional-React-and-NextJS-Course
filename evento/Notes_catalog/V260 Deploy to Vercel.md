## V260 Deploy To Vercel
Description: Send the code to Github and then deploy to Vercel.

Now finally we can push to Github first, and then we connect the project to Vercel

We create new private repository on Github `evento-project`

### Github instruction 
…or create a new repository on the command line
```
 echo "# evento-project" >> README.md
git init
git add README.md
git commit -m "first commit"
git branch -M main
git remote add origin https://github.com/libertycoverage/evento-project.git
git push -u origin main
```

…or push an existing repository from the command line
 ```
git remote add origin https://github.com/libertycoverage/evento-project.git
git branch -M main
git push -u origin main
```

The good news is, or we should know, when we create new application with `$ create-next-app` it will actually make a git repository in here, we do not have to write `$ git init`,
if we write `$ git status` we can see information about the repo


### my instruction for Github

in catalog of a remote project
```
git status
git init
git add .
git commit -m "first commit"
git remote add origin https://github.com/libertycoverage/evento-project.git
git branch -M master
git push -u origin master
```


`.gitignore` file
```

# See https://help.github.com/articles/ignoring-files/ for more about ignoring files.


# OS Specific
.DS_Store

# misc
*.pem

# Logs / debug
logs
*.log
npm-debug.log*
yarn-debug.log*
yarn-error.log*
lerna-debug.log*
.pnpm-debug.log*


# Diagnostic reports (https://nodejs.org/api/report.html)
report.[0-9]*.[0-9]*.[0-9]*.[0-9]*.json

# Runtime data
pids
*.pid
*.seed
*.pid.lock

# Directory for instrumented libs generated by jscoverage/JSCover
lib-cov

# Coverage directory used by tools like istanbul
coverage
*.lcov

# nyc test coverage
.nyc_output

# Grunt intermediate storage (https://gruntjs.com/creating-plugins#storing-task-files)
.grunt

# Bower dependency directory (https://bower.io/)
bower_components

# node-waf configuration
.lock-wscript

# Compiled binary addons (https://nodejs.org/api/addons.html)
build/Release

# Dependency directories
node_modules/
jspm_packages/
/node_modules
/.pnp
.pnp.js
.yarn/install-state.gz




# Snowpack dependency directory (https://snowpack.dev/)
web_modules/

# TypeScript cache
*.tsbuildinfo
next-env.d.ts


# Optional npm cache directory
.npm

# Optional eslint cache
.eslintcache

# Optional stylelint cache
.stylelintcache

# Microbundle cache
.rpt2_cache/
.rts2_cache_cjs/
.rts2_cache_es/
.rts2_cache_umd/

# Optional REPL history
.node_repl_history

# Output of 'npm pack'
*.tgz

# Yarn Integrity file
.yarn-integrity

# dotenv environment variable files
.env
.env*.local
.env.development.local
.env.test.local
.env.production.local
.env.local

# parcel-bundler cache (https://parceljs.org/)
.cache
.parcel-cache

# Next.js build output
.next
out

# Nuxt.js build / generate output
.nuxt
dist

# Gatsby files
.cache/
# Comment in the public line in if your project uses Gatsby and not Next.js
# https://nextjs.org/blog/next-9-1#public-directory-support
# public

# vuepress build output
.vuepress/dist

# vuepress v2.x temp and cache directory
.temp
.cache

# Docusaurus cache and generated files
.docusaurus

# Serverless directories
.serverless/

# FuseBox cache
.fusebox/

# DynamoDB Local files
.dynamodb/

# TernJS port file
.tern-port

# Stores VSCode versions used for testing VSCode extensions
.vscode-test

# yarn v2
.yarn/cache
.yarn/unplugged
.yarn/build-state.yml
.yarn/install-state.gz
.pnp.*


# Next.js
/.next/
/out/

# testing
/coverage

# production
/build

# vercel
.vercel
```


There is no .env file, we do not want to leak our secrets to the world

### deploy to vercel

Now when we have the repository with the code we can go to Vercel dashboard -> Overview -> Add New -> Project -> 

here we can link GitHub account as well as Gitlab and Bitbucket as well as Import Third-Party Git Repository. We can install Vercel addon only to certain private repository with code (privacy issues)

Then we click "Import" button on evento-project enlisted on Vercel, we proceed to "Configure Project"

Here for "Framework Preset" we choose "Next.js", 

Then we click "Deploy", it should build the project on Vercel

During the build we can see issues, it cannot find environment variables for Prisma (database). Locally we have environment variables in `.env` file.

In production repository we do not have `.env` file. We need to manually add secrets to the settings of the project on Vercel.

Settings -> Environment Variables, we copy all from `.env` file, we can paste them in one go with ctrl (cmd) + v, then we can "save"

Now we go to "Deployments" tab in Vercel, from menu on the right we choose "Redeploy"

Now it is trying to run build again, everything now works

Behind the scenes Vercel is running next build command on their servers
That would be a little bit expensive to do that completely from scratch every time, so they do a lot of caching, a lot of optimizations behind the scenes to make it fast



Every time we push to the repository linked to the build and deploy on Vercel, it will try to rebuild that project, it will be a new "Deployment" as it is called.


### Open Graph image

Now we have also an Open Graph image 

https://evento-project-lemon.vercel.app
https://evento-project-lemon.vercel.app/event/dj-practice-session

We can go to the Project "evento-project" and we can see tabs "Deployment", "Logs", "Functions", "Source", "Open Graph"

In here "Open Graph" we can see the overview how does Open Graph preview image looks for certain path, we paste "event/dj-practice-session" 

https://evento-project-5o09n5839-edgemasters-projects.vercel.app/event/dj-practice-session/opengraph-image?d595646a2e1a3230=

We can style `opengraph-image.tsx` so the preview image when we share link on social media is more visually pleasant