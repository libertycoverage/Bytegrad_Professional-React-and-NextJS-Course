<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500&display=swap"
    />
    <!-- <link rel="stylesheet" href="style.css" /> -->
    <!-- more common version in javascript files ./style.css -->

    <title>Intermediate React & Javascript - Get & Display JSON Data</title>
  </head>
  <body>
    <h1>Users:</h1>
    <ul>
      <!-- <li></li> -->
    </ul>

    <!--  we can consume promise both ways, using then and also with await in front of fetch  -->
    <script>
      // await  fetch("https://jsonplaceholder.typicode.com/users"
      fetch("https://jsonplaceholder.typicode.com/users")
        .then((response) => {
          console.log(response);
          return response.json();
        })
        // in console we get a Response object, we want a data within body, we are waiting for ReadableStream to be streamed to us fully, and we are parsing data as json,
        // we want json to be transposed to javascript object, we are chaining .then()
        .then((data) => {
          console.log(data);
          //each element in the array data is an object representing a user
          data.forEach((user) => {
            const markup = `<li>${user.name}</li>`;

            document
              .querySelector("ul")
              .insertAdjacentHTML("beforeend", markup);
          });
          // we want <li>, put their name in <li> and insert that in html, we can create html variable markup for each user, we use temp literals
          // this is for every user <li>${user.name}</li>
          //then we want to insert that user into html with <ul>
          //you can select by tag <>, user id, class, here we want only one <ul> on page
          // insertAdjacentHTML: we insert this markup at the end of the ul, right before the end
          // .then((data) => {} is a loop
        })
        .catch((error) => console.log(error));
      // we get the data in normal javascript object
    </script>
    <!-- more common version in javascript files ./script.js -->
  </body>
</html>
